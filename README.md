# AI双人对话系统

一个基于Web的AI对话系统，支持两个AI实例进行自动化对话交流。

## 功能特性

- **双AI对话**: 支持两个独立配置的AI进行自动对话
- **多平台支持**: 兼容OpenAI和Gemini API
- **实时流式响应**: 支持打字机效果的实时消息显示
- **对话控制**: 可设置最大轮次、暂停/继续、重试机制
- **上下文管理**: 可限制每次API调用的历史消息数量以控制Token消耗
- **🆕 智能上下文压缩**: 使用AI自动压缩历史对话，大幅减少Token消耗
- **🗜️ 压缩可视化**: 压缩消息显示专用图标，点击可查看压缩前后对比
- **配置持久化**: 自动保存和加载配置信息
- **对话导出**: 支持导出完整对话记录和压缩统计

## 使用方法

1. 打开 `index.html` 文件
2. 在左侧配置面板中设置两个AI的API信息
3. （可选）配置系统AI用于智能压缩功能
4. 输入开场白，点击"发起对话"开始AI间的自动对话
5. 可随时暂停、继续或停止对话

## 配置说明

### AI配置
每个AI需要配置：
- 端点类型（OpenAI/Gemini）
- API地址和密钥
- 模型名称
- 系统提示词

### 系统AI配置（用于压缩功能）
- 独立的API配置，推荐使用低成本模型（如gpt-3.5-turbo、gemini-1.5-flash）
- 自动填充专业压缩提示词

### 对话控制
- 最大轮次（0为无限制）
- 上下文消息数量限制
- 重试次数和间隔

### 智能压缩设置
- 启用/禁用AI智能压缩功能
- 压缩强度（轻度/中度/重度）
- 不压缩条数（保护最近X条消息不被压缩）

## 智能压缩功能

### 工作原理
使用专门的系统AI对对话历史进行智能分析和压缩：
- 语义理解和关键信息提取
- 保持逻辑连贯性和专业术语
- 智能缓存避免重复压缩
- 增量压缩只处理新消息

### 压缩效果
- 通常可节省50-80%的Token消耗
- 压缩成本通常只占节省Token的5-15%
- 压缩失败时自动保持原始消息

### 可视化功能
- 🗜️ 压缩图标显示压缩比例
- 点击图标查看压缩前后对比
- 实时压缩进度提示
- 详细压缩统计信息

## 注意事项

使用前请确保已获得相关AI服务的API密钥和访问权限。